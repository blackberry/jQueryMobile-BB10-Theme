(function(e){e.widget("mobile.actionbar",e.mobile.widget,{options:{initSelector:":jqmData(role='actionbar')",backButtonText:e.mobile.page.prototype.options.backBtnText,disableTapToggle:!0},_init:function(){},_create:function(){this.actionBarArea=e(this.element),this.actionOverflow=this.tabOverflow=0;var t,n=this,r=n.options,i=e(document.createElement("div")),s=e(document.createElement("div")),o=this.actionBarArea.children(":jqmData(role='action'), :jqmData(role='tab')"),u=o.filter(":jqmData(role='action')"),a=o.filter(":jqmData(role='tab')"),f=this.actionBarArea.children(":jqmData(role='back')").first();this.tabOverflow=this.actionBarArea.children(":jqmData(role='tab-overflow')"),this.actionOverflow=this.actionBarArea.children(":jqmData(role='action-overflow')"),e("[data-role=footer]").fixedtoolbar({tapToggle:!r.disableTapToggle}),this.actionBarArea.addClass("action-bar-area action-bar"),s.addClass("action-bar-actions"),e(".ui-input-text").focus(function(){e(".ui-footer").addClass("bb10-landscape-hidden")}).blur(function(){e(".ui-footer").removeClass("bb10-landscape-hidden")}),f.length&&!a.length?this._createBackButton(f,this.actionBarArea):(f.remove(),s.addClass("action-bar-actions-full-width"));if(!o||o.length<1){var l=e(document.createElement("div"));l.addClass("action-bar-action-item"),s.append(l)}for(var c=0;c<a.length;c++)s.append(this._createTabItem(a.eq(c)));for(c=0;c<u.length;c++)s.append(this._createActionItem(u.eq(c)));this.actionOverflow.length>0&&this.actionOverflow.addClass("action-bar-overflow actions").appendTo(s).bind("vclick",function(){e(n.element).trigger("actionOverflowPressed")});if(this.tabOverflow.length>0){var h=this.tabOverflow.children("p, img").length>0?"":"noContent";this.tabOverflow.addClass("action-bar-overflow tabs action-bar-tab-item "+h).prependTo(s).bind("vclick",function(t){e(n.element).trigger("tabOverflowPressed")})}this.actionBarArea.append(s);var p,d,v;a.not("[data-overflow]").length>0?(d=this.actionBarArea.find(".action-bar-tab-item").not(".tabs"),v="action-bar-grid-"+((u.length||this.actionOverflow.length)>0?"tabAction":"tabs")):(d=this.actionBarArea.find(".action-bar-action-item"),v="action-bar-grid-actions"),p=d.length,v+="-"+(p>5?"e":String.fromCharCode(96+p)),d.addClass(v),e(".action-bar-action-item, .action-bar-tab-item").bind("vmousedown",function(t){e(t.delegateTarget).addClass("pressed")}).bind("vmouseup",function(t){e(t.delegateTarget).removeClass("pressed")}),e(document).bind("actionbarIn",function(){n._animateIn(f,s)}).bind("actionbarOut",function(){n._animateOut(f,s)})},refresh:function(){},destroy:function(){e(this.overflowActionMenu).remove(),e(this.overflowTabMenu).remove()},_createOverFlowItem:function(e){e.addClass("menuItem light-text-fade");var t=e.children("p").first().html();return e.children("p").remove(),e.append(t),e},_createActionItem:function(e){return e=this._createBarItem(e),e.addClass("action-bar-action-item"),e},_createTabItem:function(e){return e=this._createBarItem(e),e.addClass("action-bar-tab-item"),e},_createBarItem:function(t){var n=t.find("p").first(),r=t.find("img").first().addClass("action-bar-action-item-image").appendTo(t);if(n)var i=e(document.createElement("div")).addClass("action-bar-action-item-text").html(n).appendTo(t);return t},_createBackButton:function(t,n){var r=e(document.createElement("div"));r.addClass("action-bar-back-text").html("<p>"+this.options.backButtonText+"</p>"),t.addClass("action-bar-back").append(r).bind("vmousedown",function(t){return e(t.delegateTarget).addClass("pressed"),window.history.back(),!1}).bind("vmouseup",function(t){e(t.delegateTarget).removeClass("pressed")}).appendTo(n)},_createOverflowButton:function(t){return e(document.createElement("div")).addClass("action-bar-overflow")},_animateIn:function(e,t){e&&e.removeClass("action-bar-back-offset-right action-bar-back-offset-left"),t.removeClass("action-bar-actions-offset-right action-bar-actions-offset-left")},_animateOut:function(e,t,n,r){e&&e.addClass("action-bar-back-offset-right"),t.addClass("action-bar-actions-offset-right"),r&&t.on("webkitTransitionEnd",function i(){t.off("webkitTransitionEnd",i),r()})},_animateBelow:function(e,t){e&&e.addClass("action-bar-back-offset-left"),t.addClass("action-bar-actions-offset-left")}}),e(document).bind("pagecreate create",function(t){e.mobile.actionbar.prototype.enhanceWithin(t.target)})})(jQuery),function(e){e.widget("mobile.activityindicator",e.mobile.widget,{options:{initSelector:":jqmData(role='bb-activity-indicator')",size:"medium",theme:"c",speed:"2s"},_create:function(){var t=this.element.attr("data-theme"),n=this.element.attr("data-size");this.options.size=n!==undefined?n:this.options.size,this.options.theme=t!==undefined?t:this.options.theme,this.swirl=e(document.createElement("div")).addClass("bb-activity-swirl bb-activity-"+this.options.size),this.element.append(this.swirl).addClass("bb-activity bb-activity-bg-"+this.options.theme+" bb-activity-"+this.options.size)},display:function(e){e?this.element.removeClass("bb-activity-hidden"):this.element.addClass("bb-activity-hidden")},speed:function(e){this.swirl.css("-webkit-animation-duration",e)}}),e(document).bind("pagecreate create",function(t){e.mobile.activityindicator.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.buttonGroup",e.mobile.widget,{options:{initSelector:':jqmData(role="controlgroup"):jqmData(type="horizontal")'},_create:function(){this.element.addClass("bb-buttongroup"),this.controlWrapper=this.element.children().addClass("bb-buttongroup-controls");var t=this.controlWrapper.children(),n=t.length,r=n%3;n>=3&&this.controlWrapper.addClass("bb-buttongroup-stacked");if(r===0)this.controlWrapper.addClass("ui-grid-b");else if(n===1)this.controlWrapper.addClass("ui-grid-solo");else if(n===2||n===4)this.controlWrapper.addClass("ui-grid-a");else{this.controlWrapper.addClass("ui-grid-b"),this.controlWrapperExtra=e(document.createElement("div")).addClass("bb-buttongroup-controls-extra ui-controlgroup-controls"),this.element.append(this.controlWrapperExtra);var i=t.slice(n-r,t.length);this.controlWrapperExtra.append(i),i.length===2?this.controlWrapperExtra.addClass("ui-grid-a"):i.length===1&&this.controlWrapperExtra.addClass("ui-grid-solo")}n>3&&(t.eq(0).removeClass("ui-corner-left").addClass("ui-corner-tl").children().removeClass("ui-corner-left").addClass("ui-corner-tl"),t.eq(n-1).removeClass("ui-corner-right").addClass("ui-corner-br").children().removeClass("ui-corner-right").addClass("ui-corner-br"),n===4?(t.eq(1).addClass("ui-corner-tr").children().addClass("ui-corner-tr"),t.eq(2).addClass("ui-corner-").css("margin-top","-2px").children().addClass("ui-corner-bl")):(t.eq(2).addClass("ui-corner-tr").children().addClass("ui-corner-tr"),r===0&&(r=3),t.eq(n-r).addClass("ui-corner-bl").children().addClass("ui-corner-bl")))}}),e(document).bind("pageinit create",function(t){e.mobile.buttonGroup.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.gridview",e.mobile.widget,{options:{initSelector:":jqmData(role='gridview')",margin:.78125},_create:function(){var e=this;e.element.addClass(function(e,t){return t+" ui-gridview "}),e.refresh(!0)},_getChildrenByTagName:function(t,n,r){var i=[],s={};s[n]=s[r]=!0,t=t.firstChild;while(t)s[t.nodeName]&&i.push(t),t=t.nextSibling;return e(i)},refresh:function(){function l(e){return o*e+n.margin*(e+1)+"%"}this.parentPage=this.element.closest(".ui-page");var t=this,n=t.options,r=this.element,i=this._getChildrenByTagName(r[0],"div","DIV"),s=window.innerWidth||e(window).width(),o=0,u={},a,f;for(var c=0,h=i.length;c<h;c++){a=i.eq(c),f="ui-grid-li";if(a.jqmData("role")==="list-divider")f+=" ui-li ui-li-divider ui-bar-b",a.attr("role","heading");else{var p=this._getChildrenByTagName(a[0],"div","DIV");o=100/p.length-n.margin-n.margin/p.length;var d=p.find("p").addClass("ui-grid-item-details").css("width",o+"%").css("left",l).end().find("img").css("width",o+"%")}u[f]||(u[f]=[]),u[f].push(a[0])}for(f in u)e(u[f]).addClass(f).children(".ui-btn-inner").addClass(f);r.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading"),r.find("a").removeClass("ui-link").addClass("ui-link-inherit")}}),e(document).bind("pagecreate create",function(t){e.mobile.gridview.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.inputValidator",e.mobile.widget,{options:{initSelector:'input[type="text"]:jqmData(role="bb-inputvalidator"), input[type="search"]:jqmData(role="bb-inputvalidator")'},_create:function(){var t=this;this.element.addClass("bb-text-validated"),this.wrapper=e(document.createElement("div")).addClass("bb-text-validator");var n=e(this.element).parent("div.ui-input-search");n.length!==0?(n.addClass("bb-text-validated"),this.wrapper.insertBefore(n).append(n)):this.wrapper.insertBefore(this.element).append(this.element),this.icon=e(document.createElement("div")).addClass("bb-validation-icon").appendTo(this.wrapper),this._validate(e(this.element)),e(".bb-text-validated").bind("focus keyup blur",function(n){t._validate(e(n.target))})},_validate:function(e){var t=new RegExp(e.attr("pattern")),n=e.parent("div.ui-input-search"),r=e.add(n);if(e.attr("required")===undefined){if(e.val()===""&&!e.is(":focus")){r.addClass("bb-text-empty").removeClass("bb-text-valid").removeClass("bb-text-invalid");return}e.hasClass("bb-text-empty")&&!e.val()&&e.is(":focus")&&r.removeClass("bb-text-empty")}t.test(e.val())?r.addClass("bb-text-valid").removeClass("bb-text-invalid"):r.removeClass("bb-text-valid").addClass("bb-text-invalid")}}),e(document).bind("pagecreate create",function(t){e.mobile.inputValidator.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.progressbar",e.mobile.widget,{options:{initSelector:"progress",color:"dark",highlightColor:"#00BC9F",accentColor:"rgb(-120, 68, 39)"},_create:function(){this.progress=this.element.css("display","none"),this.outerElement=e(document.createElement("div")).attr("class","bb-progress").insertBefore(this.progress).append(this.progress),this.outer=e(document.createElement("div")).attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color).appendTo(this.outerElement),this.fill=e(document.createElement("div")).attr("class","bb-progress-fill bb10Highlight").appendTo(this.outer),this.inner=e(document.createElement("div")).attr("class","inner").appendTo(this.outer),this.outerElement.maxValue=this.progress.attr("max")?parseInt(this.progress.attr("max"),10):0,this.outerElement.value=this.progress.attr("value")?parseInt(this.progress.attr("value"),10):0,this.setValue(this.outerElement.value)},pause:function(e){var t=e!==undefined?e:!0;t?this.fill.addClass("paused"):this.fill.removeClass("paused")},setError:function(e){var t=e!==undefined?e:!0;t?this.fill.addClass("error"):this.fill.removeClass("error")},setValue:function(e){var t=0;if(e===undefined||e<0||e>this.outerElement.maxValue)return;this.outerElement.value=e,this.value=e,e>=this.outerElement.maxValue?(t=100,this.fill.addClass("completed").removeClass("active paused error")):e===0?this.outer.attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color):(this.outer.attr("class","outer bb-progress-outer-"+this.options.color),this.fill.attr("class","bb-progress-fill bb10Highlight").css("background",""),this.fill.addClass("active").removeClass("completed paused error"),t=this.outerElement.value/parseInt(this.outerElement.maxValue,10)*100),this.fill.css("width",t+"%")}}),e(document).bind("pagecreate create",function(t){e.mobile.progressbar.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.dropdown",e.mobile.widget,{options:{initSelector:""},_init:function(){},_create:function(){var t=this,n=e(this.element).parent(),r=e('<div data-role="collapsible" data-content-theme='+e.mobile.getInheritedTheme(n,"c")+' data-collapsed="true" data-iconpos="right">'),i=e(this.element),s=e('<ul data-role="listview"></ul>').appendTo(r);this.header=e("<h1></h1>").appendTo(r),i.find("option").each(function(n,r){var i=e(document.createElement("li")).text(e(r).text());e(r).attr("selected")==="selected"&&(t._setHeader(e(r).text()),i.addClass("checked")),s.append(i)}),i.css("display","none"),e("<div>").attr("data-enhance","false").wrap(i),n.after(r),r.parent().trigger("create"),n.remove(),setTimeout(function(){i.appendTo(r)},0),s.bind("vclick",function(n){var s=e(n.target);t._setHeader(s.text()),e(".checked").removeClass("checked"),s.addClass("checked"),i.prop("value",i.find('option:contains("'+s.text()+'")').attr("value")),i.trigger("change"),r.trigger("collapse")})},_setHeader:function(e){var t=this.header.find(".ui-btn-text"),n=t.find(".ui-collapsible-heading-status");t.length===0?this.header.text(e):t.text(e).append(n)},refresh:function(){}}),e(document).unbind("selectmenubeforecreate"),e(document).bind("selectmenubeforecreate",function(t){e(t.target).dropdown()})}(jQuery);