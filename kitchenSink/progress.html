<!DOCTYPE HTML>
<!--
* Copyright 2012 Research In Motion Limited.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and 
* limitations under the License.
-->

<html>
	<head>
		<meta charset="utf-8">
		<title>Progress Bar</title>
		<!--
		<meta name="viewport" content="width=device-width, initial-scale=1">
		-->
		<script>
			var meta = document.createElement("meta");
			meta.setAttribute('name','viewport');
			meta.setAttribute('content','initial-scale='+ (1/window.devicePixelRatio) + ',user-scalable=no');
			document.getElementsByTagName('head')[0].appendChild(meta);
		</script>

		<link rel="stylesheet" href="lib/BlackBerry-JQM-all.css" />
		<script src="lib/BlackBerry-JQM-all.js"></script>
		<style>
			#shift {
				margin: 50px 0px;
			}
			.bb-progress {
				margin: 50px 20px;
			}
		</style>
	</head>
	<body>
		<div id="progressPage" data-role="page" >
			<div data-role="header" data-theme="c">
				<h1>Progress Bar</h1>
			</div><!-- /header -->
			<div data-role="content">
			<div id="shift">
				<progress id="p" value="40" max="100"></progress>
				<hr class="group">
				<h2>Live Demo</h2>
				<progress id="rogress" value="20" max="100"></progress>
				<div data-role="controlgroup">
					<a href="#" id="start" data-role="button">Start</a>
					<a href="#" id="pause" data-role="button">Pause</a>
					<a href="#" id="error" data-role="button">Error</a>
					<a href="#" id="reset" data-role="button">Reset</a>
				</div>
			</div>
			</div><!-- /content -->
			<div data-role="footer" data-position="fixed">
				<div id="action-bar-area" data-role="actionbar">
					<div data-role="back"></div>
				</div>
			</div>
		</div><!-- /page -->
		<script type="text/javascript">
			var p = 0;
			var error = pause = false;

			function watchProgress() {
				if( p > 100 || error || pause) {
					return;
				}
				$('#rogress').progressbar("setValue", p);
				p+= 4;
				setTimeout(watchProgress, 100);
			}

$('#progressPage').bind('pageinit', function () {
		$('#start').bind('vclick', function () {
			error = false;
			watchProgress();
			});

		$('#error').bind('vclick', function () {
			$('#rogress').progressbar("setError", error = !error);
			});

		$('#pause').bind('vclick', function () {
			$('#rogress').progressbar("pause", pause = !pause);
			});

		$('#reset').bind('vclick', function () {
			p = 0;
			error = pause = false;
			$('#rogress').progressbar("setValue", p);
			});
		});
</script>
	</body>
</html>
